import React, { useEffect } from 'react';
import { withRouter } from 'react-router-dom';

function Dashboard(props) {
    const { route, location } = props;

    useEffect(() => {
        handleRoute(location.pathname);
    }, [location.pathname])

    const handleRoute = (routeName) => {
        if (props.history.location.pathname !== routeName) {
            props.history.push(routeName);
            props.updateRoute(routeName);
        }

        if (props.location.pathname !== route) {
            props.updateRoute(props.location.pathname);
        }
    }

    return (
        <div className="dashboard">
            <h2 className="logo mobile text-ctr">L</h2>
            <h2 className="logo desktop text-ctr">Logo</h2>
            <div className="dash-routes flex-btwn column">
                <div>
                    <div className={`dash-route align-ctr ${route == '/' && 'selected'}`} onClick={() => handleRoute('/')}>
                        <svg className="pantry-svg" viewBox="0 0 12 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.29746 0V1.23913H0.083252V15.7427L4.29746 15.7459V17L11.992 15.7082L11.9999 1.30073L4.29746 0ZM5.57368 7.93091C5.8321 7.93091 6.0416 8.18572 6.0416 8.5C6.0416 8.81435 5.83213 9.06909 5.57368 9.06909C5.31523 9.06909 5.10576 8.81435 5.10576 8.5C5.10572 8.18572 5.31527 7.93091 5.57368 7.93091ZM1.33448 14.5742V2.40861H4.29746V14.5764L1.33448 14.5742Z" fill="white" /></svg>
                        <h2>Pantry</h2>
                    </div>
                    <div className={`dash-route align-ctr ${route.includes('grocery') && 'selected'}`} onClick={() => handleRoute('/grocery')}>
                        <svg className="grocery-svg" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.56863 12C6.51344 12 7.27936 11.3649 7.27936 10.5814C7.27936 9.79796 6.51344 9.16284 5.56863 9.16284C4.62383 9.16284 3.85791 9.79796 3.85791 10.5814C3.85791 11.3649 4.62383 12 5.56863 12Z" fill="white" /><path d="M10.5611 9.16286C9.61627 9.16286 8.85034 9.79798 8.85034 10.5814C8.85034 11.3649 9.61627 12 10.5611 12C11.5059 12 12.2718 11.3649 12.2718 10.5814C12.2718 9.79798 11.5059 9.16286 10.5611 9.16286Z" fill="white" /><path d="M13.4763 7.71532H4.55611L4.38155 6.87576H11.7132C11.9289 6.87629 12.1229 6.76711 12.202 6.60073L13.9476 2.95298C14.0537 2.72986 13.9215 2.47767 13.6524 2.38975C13.5908 2.36959 13.5251 2.35933 13.4589 2.3595H3.47382L3.05486 0.361923C3.01184 0.150704 2.78947 -0.00295373 2.53117 4.30842e-05H0.523691C0.234468 4.30842e-05 0 0.194469 0 0.434299C0 0.674129 0.234468 0.868554 0.523691 0.868554H2.09476L3.59601 8.22195C3.63904 8.43317 3.8614 8.58682 4.1197 8.58383H13.4763C13.7655 8.58383 14 8.3894 14 8.14957C14 7.90974 13.7655 7.71532 13.4763 7.71532Z" fill="white" /></svg>
                        <h2>Grocery</h2>
                    </div>
                    <div className={`dash-route align-ctr ${route.includes('recipes') && 'selected'}`} onClick={() => handleRoute('/recipes')}>
                        <svg className="recipes-svg" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 12.9724V0.810839C14 0.365035 13.541 0 12.9812 0H1.01816C0.458369 0 0 0.365035 0 0.810839V1.62168V12.9729V14.1892C0 14.6355 0.458369 15 1.01816 15H12.9812C13.3539 15 13.6799 14.8364 13.8571 14.5946H2.03632C1.47653 14.5946 1.01816 14.2301 1.01816 13.7843H12.9812C13.5416 13.7837 14 13.4192 14 12.9724ZM3.47794 10.8483C3.29617 10.993 3.00113 10.993 2.81936 10.8483C2.63825 10.704 2.63825 10.4685 2.82002 10.3238L5.72236 8.01189L6.38094 8.53636L3.47794 10.8483ZM10.5438 10.8808C10.3614 11.026 10.0663 11.025 9.8839 10.8808L4.94854 6.94983C4.9268 6.93252 4.91561 6.91101 4.89848 6.89161C4.18393 7.16224 3.15985 6.96766 2.39787 6.36084C1.4897 5.63706 1.30596 4.61014 1.98692 4.06731C2.66789 3.525 3.95738 3.67185 4.86556 4.3951C5.62753 5.00192 5.87186 5.81801 5.53203 6.38706C5.55706 6.40017 5.58406 6.40857 5.60645 6.4264L10.5425 10.3568C10.7236 10.5016 10.7249 10.7365 10.5438 10.8808ZM12.3509 5.22378L10.2362 6.90787C10.2198 6.92098 10.2 6.92885 10.1809 6.93724C9.45912 7.4486 8.71822 7.45227 8.11497 7.14336C8.10311 7.15489 8.0985 7.16906 8.08401 7.17955L7.5993 7.56608L6.94073 7.04213L7.42676 6.65507C7.43993 6.64458 7.45771 6.64038 7.4722 6.63147C7.08364 6.15052 7.08825 5.55996 7.73102 4.98619C7.74156 4.9715 7.75012 4.95524 7.76724 4.94266L9.88193 3.25804C9.9794 3.17989 10.1381 3.17989 10.2356 3.25804C10.3331 3.33566 10.3331 3.46154 10.2343 3.53916L8.19005 5.16713L8.54238 5.44825L10.5873 3.81976C10.6834 3.74213 10.8421 3.74213 10.9396 3.81976C11.0358 3.89685 11.0358 4.0222 10.9396 4.10035L8.89538 5.72885L9.24904 6.00996L11.2933 4.38199C11.3907 4.30437 11.5481 4.30385 11.6456 4.38147C11.7431 4.45909 11.7431 4.58497 11.6456 4.66259L9.60137 6.29056L9.95371 6.57115L11.9979 4.94266C12.0954 4.86503 12.2541 4.86503 12.3503 4.94266C12.4484 5.01976 12.4484 5.14615 12.3509 5.22378Z" fill="white" /></svg>
                        <h2>Recipes</h2>
                    </div>
                    {
                        props.user && props.user.username &&
                        <div className={`dash-route align-ctr ${route.includes('favorites') && 'selected'}`} onClick={() => handleRoute('/favorites')}>
                            <svg className="favorites-svg" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7931 0C7.63517 0.000101341 6.56725 0.626898 6 1.6396C5.43275 0.626898 4.36483 0.000101341 3.2069 0C1.43585 0 0 1.64791 0 3.42453C0 7.88679 6 11 6 11C6 11 12 7.88679 12 3.42453C12 1.64791 10.5642 0 8.7931 0Z" fill="#FFF9F8" /></svg>
                            <h2 className="favorite-text">Favorites</h2>
                            <h2 className="fav-text">Favs</h2>
                        </div>
                    }
                </div>
                <div className={`dash-route align-ctr ${route.includes('login') && 'selected'}`} onClick={() => handleRoute('/login')}>
                    <svg className="login-svg" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.49995 0C3.68033 0 2.19995 1.30112 2.19995 2.90039C2.19995 4.49967 3.68033 5.80078 5.49995 5.80078C7.31957 5.80078 8.79995 4.49967 8.79995 2.90039C8.79995 1.30112 7.31957 0 5.49995 0Z" fill="white" /><path d="M9.60584 7.6956C8.70237 6.88933 7.50466 6.44531 6.23333 6.44531H4.76667C3.49536 6.44531 2.29763 6.88933 1.39416 7.6956C0.495122 8.49791 0 9.55696 0 10.6777C0 10.8557 0.164169 11 0.366667 11H10.6333C10.8358 11 11 10.8557 11 10.6777C11 9.55696 10.5049 8.49791 9.60584 7.6956Z" fill="white" /></svg>
                    {
                        props.user && props.user.username ?
                            <h2>{props.user.username}</h2>
                            :
                            <h2>Login</h2>
                    }
                </div>
            </div>
        </div>
    )
}

export default withRouter(Dashboard);